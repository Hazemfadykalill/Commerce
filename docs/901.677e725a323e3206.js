"use strict";(self.webpackChunkflashCart=self.webpackChunkflashCart||[]).push([[901],{4901:(C,g,r)=>{r.r(g),r.d(g,{LoginComponent:()=>w});var _=r(6814),i=r(95),p=r(1120),t=r(4769),c=r(9410),d=r(2425);function f(e,l){1&e&&(t.TgZ(0,"p",18),t._uU(1,"Email is required"),t.qZA())}function h(e,l){1&e&&(t.TgZ(0,"p",18),t._uU(1,"email is example@gmail/yahoo.com "),t.qZA())}function v(e,l){if(1&e&&(t.TgZ(0,"div",16),t.YNc(1,f,2,0,"p",17),t.YNc(2,h,2,0,"p",17),t.qZA()),2&e){const a=t.oxw();let o,n;t.xp6(1),t.Q6J("ngIf",null==(o=a.loginForm.get("email"))?null:o.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(n=a.loginForm.get("email"))?null:n.getError("email"))}}function x(e,l){1&e&&(t.TgZ(0,"p",18),t._uU(1,"password is required"),t.qZA())}function T(e,l){1&e&&(t.TgZ(0,"p",18),t._uU(1,"password must be at least 6 char and start at least one capital char and contain any numbers "),t.qZA())}function Z(e,l){if(1&e&&(t.TgZ(0,"div",16),t.YNc(1,x,2,0,"p",17),t.YNc(2,T,2,0,"p",17),t.qZA()),2&e){const a=t.oxw();let o,n;t.xp6(1),t.Q6J("ngIf",null==(o=a.loginForm.get("password"))?null:o.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(n=a.loginForm.get("password"))?null:n.getError("pattern"))}}function L(e,l){1&e&&t._UZ(0,"i",19)}let w=(()=>{class e{constructor(a,o,n){this._AuthService=a,this.toastr=o,this._Router=n,this.isLoading=!1,this.loginForm=new i.cw({email:new i.NI("",[i.kI.required,i.kI.email]),password:new i.NI("",[i.kI.required,i.kI.pattern(/^[A-Z][a-z0-9]{6,13}$/)])})}handleFormLogin(){this.isLoading=!0,this.loginForm.valid&&this._AuthService.loginUser(this.loginForm.value).subscribe({next:o=>{"success"==o.message&&(this.isLoading=!1,this.toastr.success("Welcome "+o.user.name+" To E_commerce Application "),localStorage.setItem("userToken",o.token),this._AuthService.decodeToken(),this._Router.navigate(["/home"]))},error:o=>{this.isLoading=!1,this.toastr.error(o.error.message)}})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(c.e),t.Y36(d._W),t.Y36(p.F0))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],standalone:!0,features:[t.jDz],decls:22,vars:5,consts:[[1,"formRegister","w-75","mx-auto","my-5","py-2","px-3","bg-main-light","rounded-2","shadow"],[1,"fw-bold","text-capitalize","text-center"],[3,"formGroup","ngSubmit"],[1,"email","form-items"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control"],["email",""],["class","alert alert-danger w-50 mx-auto mt-2 rounded-3 text-center",4,"ngIf"],[1,"password","form-items"],["for","password"],["formControlName","password","type","password","id","password",1,"form-control"],["password",""],[1,"buttons","d-flex","justify-content-center"],[1,"main-btn","px-3","py-2","d-block","me-5","my-3",3,"disabled"],["class","fa-solid fa-circle-notch fa-spin text-white me-2",4,"ngIf"],["routerLink","/forgetPassword",1,"main-btn","px-3","py-2","d-block","my-3","text-capitalize"],[1,"alert","alert-danger","w-50","mx-auto","mt-2","rounded-3","text-center"],["class","text-capitalize",4,"ngIf"],[1,"text-capitalize"],[1,"fa-solid","fa-circle-notch","fa-spin","text-white","me-2"]],template:function(o,n){if(1&o&&(t.TgZ(0,"section",0)(1,"h1",1),t._uU(2,"Login now"),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return n.handleFormLogin()}),t.TgZ(4,"div",3)(5,"label",4),t._uU(6,"Email :"),t.qZA(),t._UZ(7,"input",5,6),t.YNc(9,v,3,2,"div",7),t.qZA(),t.TgZ(10,"div",8)(11,"label",9),t._uU(12,"Password :"),t.qZA(),t._UZ(13,"input",10,11),t.YNc(15,Z,3,2,"div",7),t.qZA(),t.TgZ(16,"div",12)(17,"button",13),t.YNc(18,L,1,0,"i",14),t._uU(19," Login"),t.qZA(),t.TgZ(20,"button",15),t._uU(21,"forget password"),t.qZA()()()()),2&o){const u=t.MAs(8),A=t.MAs(14);let s,m;t.xp6(3),t.Q6J("formGroup",n.loginForm),t.xp6(6),t.Q6J("ngIf",(null==(s=n.loginForm.get("email"))?null:s.errors)&&((null==(s=n.loginForm.get("email"))?null:s.touched)||u.value.length>0)),t.xp6(6),t.Q6J("ngIf",(null==(m=n.loginForm.get("password"))?null:m.errors)&&((null==(m=n.loginForm.get("password"))?null:m.touched)||A.value.length>0)),t.xp6(2),t.Q6J("disabled",n.loginForm.invalid),t.xp6(1),t.Q6J("ngIf",n.isLoading)}},dependencies:[_.ez,_.O5,i.UX,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,p.rH],styles:["p[_ngcontent-%COMP%], .alert[_ngcontent-%COMP%]{padding:0!important;margin:0!important}"]})}return e})()}}]);