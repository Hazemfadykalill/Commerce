"use strict";(self.webpackChunkflashCart=self.webpackChunkflashCart||[]).push([[792],{2792:(T,l,i)=>{i.r(l),i.d(l,{ForgetPasswordComponent:()=>Z});var d=i(6814),n=i(95),e=i(4769),c=i(9862);let u=(()=>{class o{constructor(t){this._http=t,this.forgetURL="https://ecommerce.routemisr.com/api/v1/auth/forgotPasswords",this.resetCodeURL="https://ecommerce.routemisr.com/api/v1/auth/verifyResetCode",this.resetPasswordURL="https://ecommerce.routemisr.com/api/v1/auth/resetPassword"}forget(t){return this._http.post(this.forgetURL,t)}reset(t){return this._http.post(this.resetCodeURL,t)}resetPassword(t){return this._http.put(this.resetPasswordURL,t)}static#e=this.\u0275fac=function(s){return new(s||o)(e.LFG(c.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var m=i(1120);function p(o,a){1&o&&(e.TgZ(0,"p",14),e._uU(1,"Email is required "),e.qZA())}function g(o,a){1&o&&(e.TgZ(0,"p",14),e._uU(1,"Email must be form example123@gmail/yahoo.com"),e.qZA())}function w(o,a){if(1&o&&(e.TgZ(0,"div",12),e.YNc(1,p,2,0,"p",13),e.YNc(2,g,2,0,"p",13),e.qZA()),2&o){const t=e.oxw(2);let s,r;e.xp6(1),e.Q6J("ngIf",null==(s=t.forgetPassword.get("email"))?null:s.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=t.forgetPassword.get("email"))?null:r.getError("email"))}}function f(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"section",3)(1,"h4",4),e._uU(2,"forget Password"),e.qZA(),e.TgZ(3,"form",5),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.forgetPasswordOld())}),e.TgZ(4,"div",6)(5,"label",7),e._uU(6,"Email :"),e.qZA(),e._UZ(7,"input",8,9),e.YNc(9,w,3,2,"div",10),e.qZA(),e.TgZ(10,"button",11),e._uU(11,"forget password"),e.qZA()()()}if(2&o){const t=e.MAs(8),s=e.oxw();let r;e.xp6(3),e.Q6J("formGroup",s.forgetPassword),e.xp6(6),e.Q6J("ngIf",(null==(r=s.forgetPassword.get("email"))?null:r.errors)&&((null==(r=s.forgetPassword.get("email"))?null:r.touched)||t.value.length>0))}}function _(o,a){1&o&&(e.TgZ(0,"p",14),e._uU(1,"ResetCode is required "),e.qZA())}function h(o,a){if(1&o&&(e.TgZ(0,"div",12),e.YNc(1,_,2,0,"p",13),e.qZA()),2&o){const t=e.oxw(2);let s;e.xp6(1),e.Q6J("ngIf",null==(s=t.ResetCode.get("resetCode"))?null:s.getError("required"))}}function x(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"section",15)(1,"h4",4),e._uU(2,"Reset code "),e.qZA(),e.TgZ(3,"form",5),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.resetCodePassword())}),e.TgZ(4,"div",16)(5,"label",17),e._uU(6,"ResetCode :"),e.qZA(),e._UZ(7,"input",18,19),e.YNc(9,h,2,1,"div",10),e.qZA(),e.TgZ(10,"button",20),e._uU(11,"reset code"),e.qZA()()()}if(2&o){const t=e.MAs(8),s=e.oxw();let r;e.xp6(3),e.Q6J("formGroup",s.ResetCode),e.xp6(6),e.Q6J("ngIf",(null==(r=s.ResetCode.get("resetCode"))?null:r.errors)&&((null==(r=s.ResetCode.get("resetCode"))?null:r.touched)||t.value.length>0))}}function P(o,a){1&o&&(e.TgZ(0,"p",14),e._uU(1,"New Password is required "),e.qZA())}function C(o,a){if(1&o&&(e.TgZ(0,"div",12),e.YNc(1,P,2,0,"p",13),e.qZA()),2&o){const t=e.oxw(2);let s;e.xp6(1),e.Q6J("ngIf",null==(s=t.NewPassword.get("newPassword"))?null:s.getError("required"))}}function v(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"section",21)(1,"h4",4),e._uU(2,"Confirm new password "),e.qZA(),e.TgZ(3,"form",5),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.newPasswordReset())}),e.TgZ(4,"div",22)(5,"label",23),e._uU(6,"New Password :"),e.qZA(),e._UZ(7,"input",24,25),e.YNc(9,C,2,1,"div",10),e.qZA(),e.TgZ(10,"button",20),e._uU(11,"Confirm password"),e.qZA()()()}if(2&o){const t=e.MAs(8),s=e.oxw();let r;e.xp6(3),e.Q6J("formGroup",s.NewPassword),e.xp6(6),e.Q6J("ngIf",(null==(r=s.NewPassword.get("newPassword"))?null:r.errors)&&((null==(r=s.NewPassword.get("newPassword"))?null:r.touched)||t.value.length>0))}}let Z=(()=>{class o{constructor(t,s){this._handlePassword=t,this._Router=s,this.email="",this.step1=!0,this.step2=!1,this.step3=!1,this.forgetPassword=new n.cw({email:new n.NI("",[n.kI.email,n.kI.required])}),this.ResetCode=new n.cw({resetCode:new n.NI("",[n.kI.required])}),this.NewPassword=new n.cw({newPassword:new n.NI("",[n.kI.required])})}forgetPasswordOld(){this.forgetPassword.valid&&(this.email=this.forgetPassword.value.email,console.log(this.forgetPassword.value),this._handlePassword.forget(this.forgetPassword.value).subscribe({next:t=>{"success"==t.statusMsg&&(this.step2=!0,this.step1=!1)},error:t=>{console.log("Error occurred during password retrieval")}}))}resetCodePassword(){this.ResetCode.valid&&(console.log(this.ResetCode.value),this._handlePassword.reset(this.ResetCode.value).subscribe({next:t=>{"Success"==t.status&&(this.step3=!0,this.step2=!1,this.step1=!1),console.log(t)},error:t=>{console.log("Error occurred during reset code retrieval")}}))}newPasswordReset(){let t=this.NewPassword.value;t.email=this.email,this.NewPassword.valid&&(console.log(t),this._handlePassword.resetPassword(t).subscribe({next:s=>{console.log(s),localStorage.setItem("userToken",s.token),this._Router.navigate(["/home"])},error:s=>{console.log("Error occurred during reset code retrieval")}}))}static#e=this.\u0275fac=function(s){return new(s||o)(e.Y36(u),e.Y36(m.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-forget-password"]],standalone:!0,features:[e.jDz],decls:3,vars:3,consts:[["class","formRegister w-75 mx-auto my-5 py-2 px-3 bg-main-light rounded-2 shadow",4,"ngIf"],["class","resetCode w-75 mx-auto my-5 py-2 px-3 bg-main-light rounded-2 shadow",4,"ngIf"],["class","newPassword w-75 mx-auto my-5 py-2 px-3 bg-main-light rounded-2 shadow",4,"ngIf"],[1,"formRegister","w-75","mx-auto","my-5","py-2","px-3","bg-main-light","rounded-2","shadow"],[1,"fw-bold","text-capitalize","text-center"],[3,"formGroup","ngSubmit"],[1,"email"],["for","email"],["type","email","placeholder","Enter Your Email..","id","email","formControlName","email",1,"form-control","my-2"],["email",""],["class"," alert alert-danger",4,"ngIf"],[1,"text-capitalize","main-btn","mt-3","mb-2","d-block","mx-auto","px-3","py-2"],[1,"alert","alert-danger"],["class","text-capitalize",4,"ngIf"],[1,"text-capitalize"],[1,"resetCode","w-75","mx-auto","my-5","py-2","px-3","bg-main-light","rounded-2","shadow"],[1,"resetCode"],["for","resetCode"],["type","text","placeholder","Enter Your ResetCode..","id","resetCode","formControlName","resetCode",1,"form-control","my-2"],["resetCode",""],[1,"main-btn","mt-3","mb-2","d-block","mx-auto","px-3","py-2","text-capitalize"],[1,"newPassword","w-75","mx-auto","my-5","py-2","px-3","bg-main-light","rounded-2","shadow"],[1,"new-Password"],["for","newPassword"],["type","password","placeholder","Enter Your New Password..","id","newPassword","formControlName","newPassword",1,"form-control","my-2"],["newPassword",""]],template:function(s,r){1&s&&(e.YNc(0,f,12,2,"section",0),e.YNc(1,x,12,2,"section",1),e.YNc(2,v,12,2,"section",2)),2&s&&(e.Q6J("ngIf",r.step1),e.xp6(1),e.Q6J("ngIf",r.step2),e.xp6(1),e.Q6J("ngIf",r.step3))},dependencies:[d.ez,d.O5,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]})}return o})()}}]);